<resourceDescription xmlns:xdt="http://schemas.microsoft.com/XML-Document-Transform">
  <bindings xdt:Locator="XPath(//bindings[moduleList/module/@name='Atomia.Provisioning.Modules.Dns.Dns'])">
    <resourceList>
      <resource name="AtomiaDNS" xdt:Transform="Insert">
        <property name="URL"><%= IO.popen("#{@lookup_var} atomiadns atomia_dns_url #{@hierapath} #{@modulepath}").read.gsub(/\n/,'').gsub(/\r/,'') %></property>
        <property name="Username"><%= IO.popen("#{@lookup_var} atomiadns agent_user #{@hierapath} #{@modulepath}").read.gsub(/\n/,'').gsub(/\r/,'') %></property>
        <property name="Password"><%= IO.popen("#{@lookup_var} atomiadns agent_password #{@hierapath} #{@modulepath}").read.gsub(/\n/,'').gsub(/\r/,'') %></property>
        <property name="Nameservers"><%= IO.popen("#{@lookup_var} atomiadns nameservers #{@hierapath} #{@modulepath}").read.gsub(/\n/,'').gsub(/\r/,'').gsub(',','.,').gsub('\\','').gsub('[','').gsub(']', '').gsub(/\n/,"").gsub(/\r/,"") %>.</property>
        <property name="NameserverGroup"><%= IO.popen("#{@lookup_var} atomiadns ns_group #{@hierapath} #{@modulepath}").read.gsub(/\n/,'').gsub(/\r/,'') %></property>
      </resource>
    </resourceList>
  </bindings>
</resourceDescription>

